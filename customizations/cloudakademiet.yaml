$schema: "1.0"
name: "devbox-customization"
tasks:
 - name: git-clone
    description: Clone this repository into C:\Workshop
    parameters:
      repositoryUrl: https://github.com/sopra-steria-norge/WhoOwesWhat-Net48.git
      directory: C:\Workshop
  - name: powershell
    parameters:
      command: |
        # Install WSL2 distros
        wsl --install -d Ubuntu-24.04;
      runAsUser: true
  - name: powershell
    parameters:
      runAsUser: true
      command: |
        $Choco = "$Env:ProgramData/chocolatey/choco.exe"
        if(-not (Test-Path "$Choco")){
            Set-ExecutionPolicy Bypass -Scope Process -Force;
            [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072;
            Invoke-Expression ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
        }
        Write-Host "Start to install docker desktop"
        choco install docker-desktop -y --no-progress
        Write-Host "End to install docker desktop"
        net localgroup docker-users "NT AUTHORITY\Authenticated Users" /ADD
